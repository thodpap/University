START:
LDA 2000H ;Fortwnw dip switch
MOV B,A   ;Arxikos arithmos
RRC
MOV D,A	;Metatopismenos pros ta deksia kata 1, wste A1 kai B1 na einai stin idia thesi

ANA B		;apotelesma AND A3-B3 ston A 
		;jekinaw apo edw gia logous eukolias
RRC
RRC
RRC		;To apotelesma paei stin thesi X3
ANI 08H	;Maska pou krataei mono to X3
MOV E,A	;E to synoliko apotelesma (current resutlt)
MOV A,D	;Fortwnw ksana to metatopismeno deksia kata 1

ANA B		;apotelesma AND A2-B2 ston A
RRC		;to apotelesma paei sto X3
ANI 08H	;apomonwnetai
ORA E		;OR metaksy tou apotelesmatos A2 AND B2 kai A3 AND B3 sto X3
RRC 		;Metatopisi sto X2
ADD E		
MOV E,A	;Synoliko apotelesma ws edw ston E
MOV A,D	;Fortwnw ksana to metatopismeno deksia kata 1

XRA B		;XOR A1 me B1
RRC		;Metatopisi sto X1
ANI 02H	;Maska pou krataei mono auto to bit
MOV C,A	;apothikefsi tou apotelesmatos gia tin epomenh praksi
ADD E
MOV E,A	;Synoliko apotelesma ws edw ston E

MOV A,C	;Prohgoumeno apotelesma A1 XOR B1 ston A
RRC		;Metatopisi sto X0
MOV C,A	;Apothikefsi ston C
MOV A,D	;Fortwnw ksana to metatopismeno deksia kata 1
XRA B		;XOR metaksy A0 kai B0
ANI 01H	;Maska pou krataei mono auto to apotelesma
XRA C		;XOR twn apotelesmatwn A1 XOR B1 kai A0 XOR B0
ADD E		;To A exei to synoliko apotelesma
CMA
STA 3000H

JMP START
END

