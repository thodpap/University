LXI B,0064H ;DELAY 0.1S
MVI D,00H ;TIMER
MVI E,00H ; ALL LEDS ON


WAIT_FOR_ON:
CALL DELB ;WAIT 0.1s
MOV A,E
CMA
STA 3000H ;LOAD CURRENT STATE TO LEDS
INR D ;INCREASE TIMER
MOV A,D
CPI C8H ;IF 20SEC
JZ TURN_OFF_ON ;THEN INITIALIZE CLOSE LEDS (ON DIDNT COME) 
CONTINUE_ON:
LDA 2000H ;READ INPUT
ANI 80H
CPI 80H ;CHECK IF ON CAME (MSB = 1)
JZ WAIT_FOR_OFF ;IF YES WAIT FOR OFF NOW
JMP WAIT_FOR_ON ;ELSE WAIT AGAIN FOR OFF 


TURN_OFF_ON: ;JUST TURN OFF LEDS BCS 20s PASSED
MVI E,00H
MOV A,E
CMA
STA 3000H
JMP CONTINUE_ON


WAIT_FOR_OFF: 
CALL DELB
MOV A,E
CMA
STA 3000H ;LOAD CURRENT STATE TO LEDS
INR D ;INCREASE TIMER
MOV A,D
CPI C8H ;IF 20SEC
JZ TURN_OFF_OFF ; THEN INITIALIZE CLOSE LEDS (OFF DIDNT COME)
CONTINUE_OFF: 
LDA 2000H ;READ INPUT 
ANI 80H
CPI 00H ;CHECK IF OFF CAME (MSB = 0)
JNZ WAIT_FOR_OFF ;IF NOT, REPEAT WAIT FOR OFF
MVI D,00H ;ELSE INITIALIZE AGAIN TIMER TO 0
MVI E,FFH ;CURRENT STATE OF LEDS NOW IS: ON
JMP WAIT_FOR_ON  ;WAIT FOR ON NOW


TURN_OFF_OFF: ;JUST TURN OFF LEDS BCS 20s PASSED
MVI E,00H
MOV A,E
CMA
STA 3000H
JMP CONTINUE_OFF

RST 1
END